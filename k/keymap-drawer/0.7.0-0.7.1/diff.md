# Comparing `tmp/keymap_drawer-0.7.0-py3-none-any.whl.zip` & `tmp/keymap_drawer-0.7.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,15 +1,15 @@
-Zip file size: 46464 bytes, number of entries: 29
+Zip file size: 46564 bytes, number of entries: 29
 -rw-r--r--  2.0 unx        0 b- defN 80-Jan-01 00:00 keymap_drawer/__init__.py
--rw-r--r--  2.0 unx     6730 b- defN 80-Jan-01 00:00 keymap_drawer/__main__.py
+-rw-r--r--  2.0 unx     6741 b- defN 80-Jan-01 00:00 keymap_drawer/__main__.py
 -rw-r--r--  2.0 unx     9260 b- defN 80-Jan-01 00:00 keymap_drawer/config.py
--rw-r--r--  2.0 unx    13163 b- defN 80-Jan-01 00:00 keymap_drawer/draw.py
+-rw-r--r--  2.0 unx    13227 b- defN 80-Jan-01 00:00 keymap_drawer/draw.py
 -rw-r--r--  2.0 unx     5798 b- defN 80-Jan-01 00:00 keymap_drawer/glyph.py
 -rw-r--r--  2.0 unx     9388 b- defN 80-Jan-01 00:00 keymap_drawer/keymap.py
--rw-r--r--  2.0 unx    16713 b- defN 80-Jan-01 00:00 keymap_drawer/parse.py
+-rw-r--r--  2.0 unx    16947 b- defN 80-Jan-01 00:00 keymap_drawer/parse.py
 -rw-r--r--  2.0 unx    12301 b- defN 80-Jan-01 00:00 keymap_drawer/physical_layout.py
 -rw-r--r--  2.0 unx     4183 b- defN 80-Jan-01 00:00 resources/qmk_layouts/adv360.json
 -rw-r--r--  2.0 unx     2114 b- defN 80-Jan-01 00:00 resources/qmk_layouts/berylline.json
 -rw-r--r--  2.0 unx     2267 b- defN 80-Jan-01 00:00 resources/qmk_layouts/chocofi.json
 -rw-r--r--  2.0 unx     2437 b- defN 80-Jan-01 00:00 resources/qmk_layouts/clog.json
 -rw-r--r--  2.0 unx     3502 b- defN 80-Jan-01 00:00 resources/qmk_layouts/corne_rotated.json
 -rw-r--r--  2.0 unx     3684 b- defN 80-Jan-01 00:00 resources/qmk_layouts/fingerpunch@ffkb.json
@@ -19,13 +19,13 @@
 -rw-r--r--  2.0 unx     2537 b- defN 80-Jan-01 00:00 resources/qmk_layouts/klotz.json
 -rw-r--r--  2.0 unx     1783 b- defN 80-Jan-01 00:00 resources/qmk_layouts/osprey.json
 -rw-r--r--  2.0 unx     2466 b- defN 80-Jan-01 00:00 resources/qmk_layouts/paroxysm.json
 -rw-r--r--  2.0 unx     3728 b- defN 80-Jan-01 00:00 resources/qmk_layouts/revxlp.json
 -rw-r--r--  2.0 unx     2838 b- defN 80-Jan-01 00:00 resources/qmk_layouts/rufous.json
 -rw-r--r--  2.0 unx     2803 b- defN 80-Jan-01 00:00 resources/qmk_layouts/totem.json
 -rw-r--r--  2.0 unx     6244 b- defN 80-Jan-01 00:00 resources/zmk_keyboard_layouts.yaml
--rw-r--r--  2.0 unx    26355 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.0.dist-info/METADATA
--rw-r--r--  2.0 unx       88 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.0.dist-info/WHEEL
--rw-r--r--  2.0 unx     1069 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.0.dist-info/LICENSE
--rw-r--r--  2.0 unx       54 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.0.dist-info/entry_points.txt
-?rw-r--r--  2.0 unx     2542 b- defN 16-Jan-01 00:00 keymap_drawer-0.7.0.dist-info/RECORD
-29 files, 159537 bytes uncompressed, 42346 bytes compressed:  73.5%
+-rw-r--r--  2.0 unx    26355 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       88 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx     1069 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx       54 b- defN 80-Jan-01 00:00 keymap_drawer-0.7.1.dist-info/entry_points.txt
+?rw-r--r--  2.0 unx     2542 b- defN 16-Jan-01 00:00 keymap_drawer-0.7.1.dist-info/RECORD
+29 files, 159846 bytes uncompressed, 42446 bytes compressed:  73.4%
```

## zipnote {}

```diff
@@ -66,23 +66,23 @@
 
 Filename: resources/qmk_layouts/totem.json
 Comment: 
 
 Filename: resources/zmk_keyboard_layouts.yaml
 Comment: 
 
-Filename: keymap_drawer-0.7.0.dist-info/METADATA
+Filename: keymap_drawer-0.7.1.dist-info/METADATA
 Comment: 
 
-Filename: keymap_drawer-0.7.0.dist-info/WHEEL
+Filename: keymap_drawer-0.7.1.dist-info/WHEEL
 Comment: 
 
-Filename: keymap_drawer-0.7.0.dist-info/LICENSE
+Filename: keymap_drawer-0.7.1.dist-info/LICENSE
 Comment: 
 
-Filename: keymap_drawer-0.7.0.dist-info/entry_points.txt
+Filename: keymap_drawer-0.7.1.dist-info/entry_points.txt
 Comment: 
 
-Filename: keymap_drawer-0.7.0.dist-info/RECORD
+Filename: keymap_drawer-0.7.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## keymap_drawer/__main__.py

```diff
@@ -57,27 +57,27 @@
             args.qmk_keymap_json
         )
     else:
         parsed = ZmkKeymapParser(config, args.columns, base_keymap=base, layer_names=args.layer_names).parse(
             args.zmk_keymap
         )
 
-    yaml.safe_dump(parsed, sys.stdout, indent=2, width=160, sort_keys=False, default_flow_style=None)
+    yaml.safe_dump(parsed, sys.stdout, width=160, sort_keys=False, default_flow_style=None, allow_unicode=True)
 
 
 def dump_config(config: Config) -> None:
     """Dump the currently active config, either default or parsed from args."""
 
     def cfg_str_representer(dumper, in_str):
         if "\n" in in_str:  # use '|' style for multiline strings
             return dumper.represent_scalar("tag:yaml.org,2002:str", in_str, style="|")
         return dumper.represent_scalar("tag:yaml.org,2002:str", in_str)
 
     yaml.representer.SafeRepresenter.add_representer(str, cfg_str_representer)
-    yaml.safe_dump(config.dict(), sys.stdout, indent=2, default_flow_style=False)
+    yaml.safe_dump(config.dict(), sys.stdout, sort_keys=False, allow_unicode=True)
 
 
 def main() -> None:
     """Parse the configuration and print SVG using KeymapDrawer."""
     parser = ArgumentParser(description=__doc__)
     parser.add_argument("-v", "--version", action="version", version=version("keymap-drawer"))
     parser.add_argument(
```

## keymap_drawer/draw.py

```diff
@@ -57,15 +57,15 @@
         self.out.write("</text>\n")
 
     def _draw_glyph(self, p: Point, name: str, legend_type: LegendType, classes: Sequence[str]) -> None:
         width, height, d_y = self.glyph_handler.get_glyph_dimensions(name, legend_type)
 
         classes = [*classes, "glyph", name]
         self.out.write(
-            f'<use href="#{name}" x="{p.x - (width / 2)}" y="{p.y - d_y}" '
+            f'<use href="#{name}" xlink:href="#{name}" x="{p.x - (width / 2)}" y="{p.y - d_y}" '
             f'height="{height}" width="{width}"{self._to_class_str(classes)}/>\n'
         )
 
     def _draw_arc_dendron(self, p_1: Point, p_2: Point, x_first: bool, shorten: float) -> None:
         diff = p_2 - p_1
         if (x_first and abs(diff.x) < self.cfg.arc_radius) or (not x_first and abs(diff.y) < self.cfg.arc_radius):
             self._draw_line_dendron(p_1, p_2, shorten)
@@ -272,15 +272,15 @@
         board_h = (
             len(layers) * self.layout.height
             + (len(layers) + 1) * self.cfg.outer_pad_h
             + sum(top_offset + bot_offset for top_offset, bot_offset in offsets_per_layer.values())
         )
         self.out.write(
             f'<svg width="{board_w}" height="{board_h}" viewBox="0 0 {board_w} {board_h}" class="keymap" '
-            'xmlns="http://www.w3.org/2000/svg">\n'
+            'xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n'
         )
 
         self.out.write(self.glyph_handler.get_glyph_defs())
 
         self.out.write(f"<style>{self.cfg.svg_style}</style>\n")
 
         p = Point(self.cfg.outer_pad_w, 0.0)
```

## keymap_drawer/parse.py

```diff
@@ -29,14 +29,15 @@
         layer_names: list[str] | None = None,
     ):
         self.cfg = config
         self.columns = columns if columns is not None else 0
         self.layer_names: list[str] | None = layer_names
         self.base_keymap = base_keymap
         self.layer_activated_from: dict[int, set[int]] = {}
+        self.trans_key = LayoutKey.from_key_spec(self.cfg.trans_legend)
 
     def update_layer_activated_from(self, from_layer: int | None, to_layer: int, key_positions: Sequence[int]) -> None:
         """
         Update the data structure that keeps track of what keys were held (i.e. momentary layer keys)
         in order to activate a given layer. Also considers what keys were already being held in order
         to activate the `from_layer` that the `to_layer` is being activated from.
 
@@ -52,16 +53,20 @@
         if from_layer is not None:
             self.layer_activated_from[to_layer] |= self.layer_activated_from.get(from_layer, set())
 
     def add_held_keys(self, layers: dict[str, list[LayoutKey]]) -> dict[str, list[LayoutKey]]:
         """Add "held" specifiers to keys that we previously determined were held to activate a given layer."""
         assert self.layer_names is not None
         for layer_index, activating_keys in self.layer_activated_from.items():
-            for key in activating_keys:
-                layers[self.layer_names[layer_index]][key] = LayoutKey(type="held")
+            for key_idx in activating_keys:
+                key = layers[self.layer_names[layer_index]][key_idx]
+                if key == self.trans_key:  # clear legend if it is a transparent key
+                    layers[self.layer_names[layer_index]][key_idx] = LayoutKey(type="held")
+                else:
+                    key.type = "held"
         return layers
 
     def _parse(self, in_str: str, file_name: str | None = None) -> tuple[dict, KeymapData]:
         raise NotImplementedError
 
     def parse(self, in_buf: TextIOWrapper) -> dict:
         """Wrapper to call parser on a file handle and do post-processing after firmware-specific parsing."""
@@ -101,15 +106,15 @@
 
         def mapped(key: str) -> LayoutKey:
             return LayoutKey.from_key_spec(self.cfg.qmk_keycode_map.get(key, key.replace("_", " ")))
 
         key_str = self._prefix_re.sub("", key_str)
 
         if m := self._trans_re.fullmatch(key_str):  # transparent
-            return LayoutKey.from_key_spec(self.cfg.trans_legend)
+            return self.trans_key
         if m := self._mo_re.fullmatch(key_str):  # momentary layer
             to_layer = int(m.group(1).strip())
             self.update_layer_activated_from(current_layer, to_layer, key_positions)
             return LayoutKey(tap=self.layer_names[to_layer])
         if m := self._mts_re.fullmatch(key_str):  # short mod-tap syntax
             tap_key = mapped(m.group(2).strip())
             return LayoutKey(tap=tap_key.tap, hold=m.group(1), shifted=tap_key.shifted)
@@ -206,15 +211,15 @@
                 mapped.shifted = ""
             return mapped
 
         match binding.split():
             case ["&none"]:
                 return LayoutKey()
             case ["&trans"]:
-                return LayoutKey.from_key_spec(self.cfg.trans_legend)
+                return self.trans_key
             case [ref]:
                 return LayoutKey(tap=ref)
             case ["&kp", par]:
                 return mapped(par)
             case ["&sk", par]:
                 l_key = mapped(par)
                 return LayoutKey(tap=l_key.tap, hold=self.cfg.sticky_label, shifted=l_key.shifted)
```

## Comparing `keymap_drawer-0.7.0.dist-info/METADATA` & `keymap_drawer-0.7.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: keymap-drawer
-Version: 0.7.0
+Version: 0.7.1
 Summary: A module and CLI tool to help parse and draw keyboard layouts.
 Home-page: https://github.com/caksoylar/keymap-drawer
 License: MIT
 Author: Cem Aksoylar
 Author-email: caksoylar@gmail.com
 Requires-Python: >=3.10,<4.0
 Classifier: License :: OSI Approved :: MIT License
```

## Comparing `keymap_drawer-0.7.0.dist-info/LICENSE` & `keymap_drawer-0.7.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `keymap_drawer-0.7.0.dist-info/RECORD` & `keymap_drawer-0.7.1.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 keymap_drawer/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-keymap_drawer/__main__.py,sha256=-PvloduMyLgXI5sFVOWUlAyckZ7DGbUDjBxbYFepVx8,6730
+keymap_drawer/__main__.py,sha256=k-j2SVcBBfoJ-zRW8rrDuH0nr2GzEhScadabb0HnREM,6741
 keymap_drawer/config.py,sha256=YGZLdRNo4pWLirYOiFdvPmSjlYdMQhKLnKfAXmkvOSk,9260
-keymap_drawer/draw.py,sha256=pJFKogqoc2Lvt47BHwMleIeC43is3sbiELcxXiN80vA,13163
+keymap_drawer/draw.py,sha256=wbSsxRezfsgcZCm3f7_KfkwyvfeuU1EmiC9tRJvYeUM,13227
 keymap_drawer/glyph.py,sha256=bLDtb_Zcl6fHMCxJ6JGcgogcXhb-U84fkEHDckDvR1s,5798
 keymap_drawer/keymap.py,sha256=saEQG30NgVftS7cax60aHmx9i1WHiEm4RZdm1p0yGSk,9388
-keymap_drawer/parse.py,sha256=GZn-UN_5qkYm9prz_FV1kgfd-RtN0qI_0H0yqdZNx-Q,16713
+keymap_drawer/parse.py,sha256=LKMrrhSqVwEJuNJrmBQF-mIoMZWhS2Y8isd0_W-2ll0,16947
 keymap_drawer/physical_layout.py,sha256=xKtFg3p9DjVBURHdA0KpU6vPKFr3gkxmaDc0cjoo1v0,12301
 resources/qmk_layouts/adv360.json,sha256=MM5xOXcn9-O4hzei6RPJoFhLbqz86fEqczdqGU6N2uE,4183
 resources/qmk_layouts/berylline.json,sha256=lsTJzCcQ78TeYUYoBa67fAb4cm6_phrwL9eHphw4qq4,2114
 resources/qmk_layouts/chocofi.json,sha256=Lsayi_fcsljEGGmQwmI_KLUf7snLy_qEqSSVbFcpEkQ,2267
 resources/qmk_layouts/clog.json,sha256=wzkTRyevr0OkZoFNJkWRQ8APpKQ3S5cBiuwdxSnTRt8,2437
 resources/qmk_layouts/corne_rotated.json,sha256=8hTZZSuP4C2p9ywDtnW4o8ThNC9Zw0ue9qwGX1aaOXk,3502
 resources/qmk_layouts/fingerpunch@ffkb.json,sha256=toAtmnP65nnEGE-alZUGShf5E-l58vvl3nipRBBh9hQ,3684
@@ -18,12 +18,12 @@
 resources/qmk_layouts/klotz.json,sha256=jV-tpL1FixKxk78_EnW4UvfricUYsFfFbWf-j1SeY7Y,2537
 resources/qmk_layouts/osprey.json,sha256=_2qw3uVKeuZNybUEhWpcy0U831lldj1LfH6szXeh_j4,1783
 resources/qmk_layouts/paroxysm.json,sha256=y17689V0dqnDhmDgxlzw1kPnNaQub-GHgrsa4-kEV_8,2466
 resources/qmk_layouts/revxlp.json,sha256=FRFgeD6PAQAwDg1gVEZPJl7-tPdTFv7HSQ7Pc-62hgI,3728
 resources/qmk_layouts/rufous.json,sha256=6VtvTikJtgEYx0xfkSTT9_KaLdW5TfmoFoaz0uf5GYQ,2838
 resources/qmk_layouts/totem.json,sha256=HXKwNwjT9lByzFhqlAFhxhhp_SYerOsTasJwUppCh4U,2803
 resources/zmk_keyboard_layouts.yaml,sha256=jC_CzZWmyIXWAIxSER877imSqI0u_0trMzxBLQDIsL0,6244
-keymap_drawer-0.7.0.dist-info/METADATA,sha256=k7UEMv-0Ro4wtmmzhNhcVB5xI_0-u2oxhgldHh08XYM,26355
-keymap_drawer-0.7.0.dist-info/WHEEL,sha256=vVCvjcmxuUltf8cYhJ0sJMRDLr1XsPuxEId8YDzbyCY,88
-keymap_drawer-0.7.0.dist-info/LICENSE,sha256=ym_5D56d6k2MroMU8y9ZDt1ZUI4H7PYgbfa87rNFCaM,1069
-keymap_drawer-0.7.0.dist-info/entry_points.txt,sha256=kog7wHfRs-vFQWhh8V3H-Ra4UPbW1nINE9VHJZ1aK2w,54
-keymap_drawer-0.7.0.dist-info/RECORD,,
+keymap_drawer-0.7.1.dist-info/METADATA,sha256=ty8R5cQDZTyHNU5a1MOiQcygJ8fbS0utz9wtNbwBUB8,26355
+keymap_drawer-0.7.1.dist-info/WHEEL,sha256=vVCvjcmxuUltf8cYhJ0sJMRDLr1XsPuxEId8YDzbyCY,88
+keymap_drawer-0.7.1.dist-info/LICENSE,sha256=ym_5D56d6k2MroMU8y9ZDt1ZUI4H7PYgbfa87rNFCaM,1069
+keymap_drawer-0.7.1.dist-info/entry_points.txt,sha256=kog7wHfRs-vFQWhh8V3H-Ra4UPbW1nINE9VHJZ1aK2w,54
+keymap_drawer-0.7.1.dist-info/RECORD,,
```

