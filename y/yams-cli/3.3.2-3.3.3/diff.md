# Comparing `tmp/yams_cli-3.3.2-py3-none-any.whl.zip` & `tmp/yams_cli-3.3.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 32186 bytes, number of entries: 20
--rw-r--r--  2.0 unx        0 b- defN 23-May-22 12:31 yams_cli/__init__.py
--rw-r--r--  2.0 unx     1256 b- defN 23-May-22 12:31 yams_cli/connection_specs.py
--rw-r--r--  2.0 unx     4590 b- defN 23-May-22 12:31 yams_cli/profile.py
--rw-r--r--  2.0 unx     7246 b- defN 23-May-22 12:31 yams_cli/utils.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-22 12:31 yams_cli/logic/__init__.py
--rw-r--r--  2.0 unx    39253 b- defN 23-May-22 12:31 yams_cli/logic/args.py
--rw-r--r--  2.0 unx     1944 b- defN 23-May-22 12:31 yams_cli/logic/cli.py
--rw-r--r--  2.0 unx    39308 b- defN 23-May-22 12:31 yams_cli/logic/dispatcher.py
--rw-r--r--  2.0 unx     1326 b- defN 23-May-22 12:31 yams_cli/logic/injection.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-22 12:31 yams_cli/logic/core/__init__.py
--rw-r--r--  2.0 unx     7917 b- defN 23-May-22 12:31 yams_cli/logic/core/http_client.py
--rw-r--r--  2.0 unx    40068 b- defN 23-May-22 12:31 yams_cli/logic/core/manager.py
--rw-r--r--  2.0 unx      979 b- defN 23-May-22 12:31 yams_cli/logic/core/models.py
--rw-r--r--  2.0 unx      828 b- defN 23-May-22 12:31 yams_cli/logic/exceptions/YamsException.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-22 12:31 yams_cli/logic/exceptions/__init__.py
--rw-r--r--  2.0 unx     9948 b- defN 23-May-22 12:32 yams_cli-3.3.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-22 12:32 yams_cli-3.3.2.dist-info/WHEEL
--rw-r--r--  2.0 unx       49 b- defN 23-May-22 12:32 yams_cli-3.3.2.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        9 b- defN 23-May-22 12:32 yams_cli-3.3.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1652 b- defN 23-May-22 12:32 yams_cli-3.3.2.dist-info/RECORD
-20 files, 156465 bytes uncompressed, 29476 bytes compressed:  81.2%
+Zip file size: 32326 bytes, number of entries: 20
+-rw-r--r--  2.0 unx        0 b- defN 23-May-22 14:09 yams_cli/__init__.py
+-rw-r--r--  2.0 unx     1256 b- defN 23-May-22 14:09 yams_cli/connection_specs.py
+-rw-r--r--  2.0 unx     4590 b- defN 23-May-22 14:09 yams_cli/profile.py
+-rw-r--r--  2.0 unx     7246 b- defN 23-May-22 14:09 yams_cli/utils.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-22 14:09 yams_cli/logic/__init__.py
+-rw-r--r--  2.0 unx    40535 b- defN 23-May-22 14:09 yams_cli/logic/args.py
+-rw-r--r--  2.0 unx     1944 b- defN 23-May-22 14:09 yams_cli/logic/cli.py
+-rw-r--r--  2.0 unx    40288 b- defN 23-May-22 14:09 yams_cli/logic/dispatcher.py
+-rw-r--r--  2.0 unx     1326 b- defN 23-May-22 14:09 yams_cli/logic/injection.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-22 14:09 yams_cli/logic/core/__init__.py
+-rw-r--r--  2.0 unx     7917 b- defN 23-May-22 14:09 yams_cli/logic/core/http_client.py
+-rw-r--r--  2.0 unx    40313 b- defN 23-May-22 14:09 yams_cli/logic/core/manager.py
+-rw-r--r--  2.0 unx      979 b- defN 23-May-22 14:09 yams_cli/logic/core/models.py
+-rw-r--r--  2.0 unx      828 b- defN 23-May-22 14:09 yams_cli/logic/exceptions/YamsException.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-22 14:09 yams_cli/logic/exceptions/__init__.py
+-rw-r--r--  2.0 unx     9948 b- defN 23-May-22 14:11 yams_cli-3.3.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-22 14:11 yams_cli-3.3.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       49 b- defN 23-May-22 14:11 yams_cli-3.3.3.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        9 b- defN 23-May-22 14:11 yams_cli-3.3.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1652 b- defN 23-May-22 14:11 yams_cli-3.3.3.dist-info/RECORD
+20 files, 158972 bytes uncompressed, 29616 bytes compressed:  81.4%
```

## zipnote {}

```diff
@@ -39,23 +39,23 @@
 
 Filename: yams_cli/logic/exceptions/YamsException.py
 Comment: 
 
 Filename: yams_cli/logic/exceptions/__init__.py
 Comment: 
 
-Filename: yams_cli-3.3.2.dist-info/METADATA
+Filename: yams_cli-3.3.3.dist-info/METADATA
 Comment: 
 
-Filename: yams_cli-3.3.2.dist-info/WHEEL
+Filename: yams_cli-3.3.3.dist-info/WHEEL
 Comment: 
 
-Filename: yams_cli-3.3.2.dist-info/entry_points.txt
+Filename: yams_cli-3.3.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: yams_cli-3.3.2.dist-info/top_level.txt
+Filename: yams_cli-3.3.3.dist-info/top_level.txt
 Comment: 
 
-Filename: yams_cli-3.3.2.dist-info/RECORD
+Filename: yams_cli-3.3.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## yams_cli/logic/args.py

```diff
@@ -28,15 +28,15 @@
     'args': ['--bucket-alias'],
     'required': True,
     'help': "bucket alias (instead of --domain-id and --bucket-id)",
 }
 object_id = {
     'args': ['--object-id'],
     'required': True,
-    'help': "ID of the object (UUIDv4)",
+    'help': "ID of the object",
 }
 processing_id = {
     'args': ['--processing-id'],
     'required': True,
     'help': "ID of the processing job"
 }
 policy_id = {
@@ -654,15 +654,15 @@
     commands['info'].add_argument_as_dict(bucket_id)
     commands['info'].add_argument(
         '--metric-name', required=True, help="name of the metric")
     commands['info'].add_argument(
         '--year-month', required=True, help="year and month of the metrics. Format: YYYY-MM")
 
 
-def setup_video_processing(command):
+def setup_yams_video_processing(command):
     commands = command.add_subcommands('action', [
         ('start', "start processing video to different codecs and resolutions",
          "--domain-id 5adcb26c-92fe-4f83-afb5-bf2322c0bfca --bucket-id 04760f77-da25-4de1-adde-bdfe62337c3c " +
          "--object-id some-object-id --rule a-rule"),
         ('status', "Get video processing job status",
          "--domain-id 5adcb26c-92fe-4f83-afb5-bf2322c0bfca --bucket-id 04760f77-da25-4de1-adde-bdfe62337c3c " +
          "--object-id some-object-id --rule a-rule")
@@ -675,14 +675,37 @@
 
     commands['status'].add_argument_as_dict(domain_id)
     commands['status'].add_argument_as_dict(bucket_id)
     commands['status'].add_argument_as_dict(object_id)
     commands['status'].add_argument_as_dict(rule_id_or_alias)
 
 
+def setup_yams_video(command):
+    commands = command.add_subcommands('action', [
+        ('fetch', "get a video URL transcoded with a specific rule",
+         "--domain-id 5adcb26c-92fe-4f83-afb5-bf2322c0bfca --bucket-id 04760f77-da25-4de1-adde-bdfe62337c3c" +
+         " --object-id 51/51151eef-0f94-4e9a-b22c-5d6666546666 --rule-id 73cfa229-946b-4c3b-9b49-84b7eb358de0" +
+         "\n  %(prog)s" +
+         " --bucket-alias my-bucket-alias" +
+         " --object-id 51/51151eef-0f94-4e9a-b22c-5d6666546666 --rule-id 73cfa229-946b-4c3b-9b49-84b7eb358de0" +
+         "\n\nWhenever --bucket-alias is used, it will have precedence over --domain-id and --bucket-id (if present)."),
+    ])
+
+    commands['fetch'].add_argument_as_dict(domain_id, required=False)
+
+    group_alias = commands['fetch'].add_mutually_exclusive_group(required=True)
+    group_alias.add_argument_as_dict(bucket_id, required=False)
+    group_alias.add_argument_as_dict(bucket_alias, required=False)
+
+    commands['fetch'].add_argument_as_dict(object_id)
+
+    group = commands['fetch'].add_mutually_exclusive_group(required=True)
+    group.add_argument_as_dict(rule_id_or_alias, required=False)
+
+
 def setup_yams_processing(command):
     commands = command.add_subcommands('action', [
         ('sync', "sync processing",
          "--domain-id 5adcb26c-92fe-4f83-afb5-bf2322c0bfca --bucket-id 04760f77-da25-4de1-adde-bdfe62337c3c " +
          "--object-id some-object-id --models background-removal-preview"),
         ('start', "start processing",
          "--domain-id 5adcb26c-92fe-4f83-afb5-bf2322c0bfca --bucket-id 04760f77-da25-4de1-adde-bdfe62337c3c " +
@@ -825,38 +848,39 @@
 
     # Parse global options first so they can be placed anywhere, unless the --help/-h flag is set
     parsed_args, rest = None, argv
     if '-h' not in rest and '--help' not in rest:
         parsed_args, rest = parser.parse_known_args(rest)
 
     # Add commands
+
     commands = parser.add_subcommands('command', [
         ('configure', "create credential files", ""),
         ('tenant', "get tenant info, update or delete tenant", None),
         ('distribution', "list, create or delete distributions", None),
         ('domain', "list, create or delete domains", None),
         ('bucket', "list, create, update or delete buckets", None),
         ('object', "list, fetch, upload, delete, restore media files or uncache", None),
         ('object-metadata', "get or update object metadata", None),
         ('image', "get an image applying a transformation rule", None),
         ('document', "get a document applying a transformation rule", None),
-        ('video-processing', "Process video features", None),
         ('static', "get the original-stored file", None),
+        ('video', "get the video transcoded with a specific rule", None),
+        ('video-processing', "Process video features", None),
         ('rule', "list, create, update or delete transformation rules", None),
         ('accesskey', "list, create, update, provide or revoke access keys. Also, attach or detach policies", None),
         ('policy', "list, create, update or delete policies", None),
         ('watermark', "list, fetch, create, update or delete watermarks", None),
         ('metrics', "show usage metrics", None),
         ('processing', "ML processing", None),
         ('ml-models', "list ml models ready to be used by this tenant", None),
         ('ml-models-config', "list, get info, create, update or delete tenant ml models configurations", None),
         ('job', "list, get info, create jobs", None),
         ('help', "show this message", "bucket create"),
     ])
-
     setup_yams_tenant(commands['tenant'])
     setup_yams_distribution(commands['distribution'])
     setup_yams_domain(commands['domain'])
     setup_yams_bucket(commands['bucket'])
     setup_yams_object(commands['object'])
     setup_yams_object_metadata(commands['object-metadata'])
     setup_yams_image(commands['image'])
@@ -866,15 +890,16 @@
     setup_yams_accesskey(commands['accesskey'])
     setup_yams_policy(commands['policy'])
     setup_yams_watermark(commands['watermark'])
     setup_yams_metrics(commands['metrics'])
     setup_yams_processing(commands['processing'])
     setup_yams_ml_models(commands['ml-models'])
     setup_yams_ml_models_config(commands['ml-models-config'])
-    setup_video_processing(commands['video-processing'])
+    setup_yams_video_processing(commands['video-processing'])
+    setup_yams_video(commands['video'])
     setup_yams_job(commands['job'])
     setup_yams_help(commands['help'])
 
     for command in commands.values():
         add_subcommands_to_description(command)
 
     # Finish parsing args
```

## yams_cli/logic/dispatcher.py

```diff
@@ -10,15 +10,15 @@
 import urllib
 import re
 import tempfile
 import urllib.parse
 
 from injector import inject
 from datetime import datetime
-from yams_cli.logic.core.manager import Manager, StaticsPathBuilder, DocumentsPathBuilder, ImagesPathBuilder
+from yams_cli.logic.core.manager import Manager, StaticsPathBuilder, DocumentsPathBuilder, ImagesPathBuilder, VideosPathBuilder
 from yams_cli.profile import Profile
 from yams_cli.utils import generate_pretty_print,  str2bool, dispatcher_exception_safe, \
     get_directory, get_timestamp, latest_version_warning
 
 
 log = logging.getLogger('yams-cli.dispatcher')
 
@@ -983,14 +983,42 @@
             return False
 
         return True
 
     # ######################################################
     # VIDEOS
     # ######################################################
+
+    @latest_version_warning
+    @dispatcher_exception_safe(Exception)
+    def video_fetch(self, args):
+        rule_id = args.get('rule_id')
+
+        path_builder = VideosPathBuilder(
+            tenant_id=self.tenant_id,
+            domain_id=args.get('domain_id'),
+            bucket_id=args.get('bucket_id'),
+            bucket_alias=args.get('bucket_alias'),
+            object_id=args['object_id']
+        )
+
+        if path_builder.can_create_path():
+            if rule_id:
+                self._print_url(self._manager.fetch_object(path_builder, rule_id, None))
+            else:
+                log.warning("When fetching a video, --rule-id must be provided")
+                return False
+        else:
+            log.warning(path_builder.error_message())
+            return False
+        return True
+
+    # ######################################################
+    # VIDEOS - PROCESSING
+    # ######################################################
     @latest_version_warning
     @dispatcher_exception_safe(Exception)
     def video_processing_start(self, args):
         domain_id = args['domain_id']
         bucket_id = args['bucket_id']
         object_id = args['object_id']
         rule_id = args['rule_id']
```

## yams_cli/logic/core/manager.py

```diff
@@ -86,14 +86,19 @@
 
 
 class ImagesPathBuilder(FetchPathBuilder):
     def __init__(self, tenant_id=None, domain_id=None, bucket_id=None, bucket_alias=None, object_id=None):
         super().__init__(tenant_id, domain_id, bucket_id, bucket_alias, object_id, 'images')
 
 
+class VideosPathBuilder(FetchPathBuilder):
+    def __init__(self, tenant_id=None, domain_id=None, bucket_id=None, bucket_alias=None, object_id=None):
+        super().__init__(tenant_id, domain_id, bucket_id, bucket_alias, object_id, 'videos')
+
+
 class Manager(object):
     @inject
     def __init__(self, connection_specs: ConnectionSpecs, http_client: HttpClient,
                  max_input_size_before_chunking=DEFAULT_MAX_OBJECT_SIZE_IN_MIB_BEFORE_CHUNKING,
                  chunk_size=DEFAULT_CHUNK_SIZE_IN_MIB):
         log.debug("Connection specs:\n{}".format(connection_specs.dump_connection_specs()))
         self._management_url = connection_specs.get_connection_value('management_url')
```

## Comparing `yams_cli-3.3.2.dist-info/METADATA` & `yams_cli-3.3.3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: yams-cli
-Version: 3.3.2
+Version: 3.3.3
 Summary: Yams CLI 
 Author: Team Edge
 Author-email: infrastructure-platform-edge@adevinta.com
 Classifier: Programming Language :: Python :: 3.7
 Description-Content-Type: text/markdown
 Requires-Dist: requests (==2.27.1)
 Requires-Dist: configparser (==5.2.0)
```

## Comparing `yams_cli-3.3.2.dist-info/RECORD` & `yams_cli-3.3.3.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,20 +1,20 @@
 yams_cli/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 yams_cli/connection_specs.py,sha256=Ky-C-GEtasrkDCnQc4gy9aU1aIwtDWO_KjApqm32zVE,1256
 yams_cli/profile.py,sha256=zxk4K6imy750LrFf9DAvuA-FlEwlmJEK6OVuQh9SShE,4590
 yams_cli/utils.py,sha256=9HnYlYJYQZumOIkj1Dk8X2TpkZysbXxaloGZY7Jz0X8,7246
 yams_cli/logic/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-yams_cli/logic/args.py,sha256=FJu3eZWM0oNt87FpNN6eXa13KwmpYTQt9QbPKx0B4bI,39253
+yams_cli/logic/args.py,sha256=eizbwi7A1vK_hpPZS6WCmExCiolIqmigrif0VofhjrU,40535
 yams_cli/logic/cli.py,sha256=B3VJvlW20KxJui5HIOq9VoL008ydV1GauS9fRTurTuM,1944
-yams_cli/logic/dispatcher.py,sha256=-zF-6NpXqbWAhQyYW-3Zg9lCO6ywLWqiy_gxSwTSuxw,39308
+yams_cli/logic/dispatcher.py,sha256=jJNVHH_9zChpqAKLzW2pWLX0PAKSXU0htezDIM6btmE,40288
 yams_cli/logic/injection.py,sha256=M_H2aTxLCdGaCSled8LCQxZVyFT7n2zoISIxXe4L8lw,1326
 yams_cli/logic/core/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 yams_cli/logic/core/http_client.py,sha256=dS8v8IgfriAsw1pcMfmVR6TPhB1e-SfNuJP1RlcmbVA,7917
-yams_cli/logic/core/manager.py,sha256=vSBrMU8wqC5j3w2IZKEYMTq0ddiGmtLlURMokMGgcKg,40068
+yams_cli/logic/core/manager.py,sha256=Q1a3S21dm3nkhgiFPQxG8cil7GKWpoaOH31-bnV9O-0,40313
 yams_cli/logic/core/models.py,sha256=a1aKZgeuapxdhYJX2uQzFtVsMZiV7N8yy6SZ0pM1Z6E,979
 yams_cli/logic/exceptions/YamsException.py,sha256=VseM49ggqCG4TzhToEGFlQndKII7oPlyN3rmaL7fqvk,828
 yams_cli/logic/exceptions/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-yams_cli-3.3.2.dist-info/METADATA,sha256=2KIYecu3D5drU1HOwqnfKzDKPgH7MC99nXenn-HJF0I,9948
-yams_cli-3.3.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-yams_cli-3.3.2.dist-info/entry_points.txt,sha256=DbyTPLf9AYYfczTwfiqaMQavTPyy_s68Fteo32GzHCA,49
-yams_cli-3.3.2.dist-info/top_level.txt,sha256=cmdesC2KvC8Q2oXndWeUp2cGKyqItFXMTModo3oU6oc,9
-yams_cli-3.3.2.dist-info/RECORD,,
+yams_cli-3.3.3.dist-info/METADATA,sha256=FCCXpeBpRRCENmH6A7fWGm2N-OjkahKDQOtcAevQRwA,9948
+yams_cli-3.3.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+yams_cli-3.3.3.dist-info/entry_points.txt,sha256=DbyTPLf9AYYfczTwfiqaMQavTPyy_s68Fteo32GzHCA,49
+yams_cli-3.3.3.dist-info/top_level.txt,sha256=cmdesC2KvC8Q2oXndWeUp2cGKyqItFXMTModo3oU6oc,9
+yams_cli-3.3.3.dist-info/RECORD,,
```

